---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import Image from '../../components/Image.astro';
import Section from '../../layouts/Section.astro';

const artPieces = await getCollection('art')

---

<Section title={'Shop'} description={''}>
	<section>
			{
				artPieces.map((artPiece) => (
					<div class="product">
						<a href={artPiece.data.inStock ? `/shop/${artPiece.slug}/` : ''}>
							<Image width={720} height={360} src={artPiece.data.image} alt={artPiece.data.description} />
						</a>
						<div class="info">
							<h4 class="title">{artPiece.data.title}</h4>
							{artPiece.data.price ? `$${artPiece.data.price}` : 'FREE'}
						</div>
					</div>
				))
			}
	</section>
</Section>
<style>
	section {
		display: flex;
		flex-wrap: wrap;
		justify-content: space-between;
		width: 100%;
		height: 100%;
	}
	.product {
		--border-width: 2px;
		display: flex;
		align-items: flex-end;
		width: calc(33% - 0.5rem);
		height: 13rem;
		position: relative;
		margin-bottom: 0.5rem;
		border: var(--border-width) solid rgba(0, 0, 0, 0.33);
		transition: border 200ms ease-in-out;
		/* border-radius: 0.5rem; */
	}
	.product:hover {
		border: 2px solid rgba(0, 0, 0, 0.75);
	}
	.product::before {
		content: "";
		position: absolute;
		/* max-width: 100%; */
		width: calc(100% + 2 * var(--border-width));
		top: 1rem;
		bottom: 1rem;
		left: calc(-1 * var(--border-width));
		/* background-color: red; */
		background-color: var(--off-white);
		/* border: 2px solid var(--off-white); */
		z-index: 1;
		transition: top 200ms ease-in-out, bottom 200ms ease-in-out;
	}
	.product::after {
		content: "";
		position: absolute;
		/* max-height: 100%; */
		height: calc(100% + 2 * var(--border-width));
		left: 1rem;
		right: 1rem;
		top: calc(-1 * var(--border-width));
		background: var(--off-white);
		/* background: red; */
		/* border: 2px solid var(--off-white); */
		z-index: 1;
		transition: left 200ms ease-in-out, right 200ms ease-in-out;
	}
	.product:hover::before {
		top: 50%;
		bottom: 50%;
	}
	.product:hover::after {
		left: 50%;
		right: 50%;
	}

	.product a {
		display: flex;
		align-self: flex-end;
	}
	.product :is(a, img) {
		z-index: 2;
		max-width: 100%;
		max-height: 100%;
		object-fit: contain;
	}
	.product .info {
		display: flex;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		opacity: 0;
		transition: opacity 150ms ease-in-out;
		z-index: 3;
	}
	.product:hover .info {
		opacity: 1;
		pointer-events: none;
	}
	.product .info:is(*, * *) {
		color: black;
	}
</style>